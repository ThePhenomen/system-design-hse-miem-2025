## Выбор и настройки объектного хранилища
Выберем объектное хранилище, совместимое с API S3. Поскольку использование AWS на текущий момент запрещено, будем искать вариант среди решений с открытым исходным кодом. Будем выбирать среди двух популярных решений: Minio и Ceph. Ceph сложен в настройке и поддержке, поэтому будем использовать Minio.
Рассмотрим конфигурацию Minio:
- Для реализации минимального отказоустойчивого решения будем использовать конфигурацию из 4 инстансов базы;
- К каждому инстансу будут подключены 4 драйвера (4 диска);
- Установим Erasure Code Stripe Size (K+M) в 16 и Erasure Code Parity в 4 (https://min.io/docs/minio/linux/operations/concepts/erasure-coding.html);
- Данная конфигурация позволит обеспечить допуск выхода из строя одного инстанса целиком (или 4 драйверов).

## Выбор реляционной БД
Выберем реляционное БД. В текущих условиях использоване Oracle невозможно, поэтому остановимся на PostgreSQL, т.к. данная СУБД обладает широким community, активно развивается, содержит обширную документацию и имеет enterprise версию PostgreSQL Pro (поддерживается отечественным вендором)
Рассмотрим конфигурацию PostgreSQL:
- Будет использоваться репликация с основной копией (master-slave);
- Будут использоваться один ведущий и один ведомый узлы;
- Будет осуществляться ручное переключение ведущего узла;
- Данный вариант позволит избежать потери данных при выходе из строя ведущего узла, а также стоит имеет низкую стоимость поддержки.

## Выбор нереляционной БД
Выберем нереляционное БД. В качестве наиболее популярной базы данных типа ключ-значение будем использовать Redis. Данная база данных имеет широкую документацию, возможность переключения ведущего сервера на горячую.
Рассмотрим конфигурацию Redis:
- Будет использоваться Sentinel для переключения ведущего сервера;
- Будут использоваться 3 сервера, на 2-х будут установлены инстансы Sentinel и Redis, 3-ий сервер кворумный, на нем будет находится инстанс Sentinel;
- Значение кворума будет установлено в 2;
- Такая конфигурация позволит избежать прекращение работы кэша при выходе из строя ведущего узла путем автоматического переключения мастера.
